# 1장

## 신뢰성
- 애플리케이션은 사용자가 기대한 기능을 수행한다.
- 시스템은 사용자가 범한 실수나 예상치 못한 소프트웨어 사용법을 허용할 수 있다.
- 시스템 성능은 예상된 부하와 데이터 양에서 필수적인 사용 사례를 충분히 만족한다.
- 시스템은 허가되지 않은 접근과 오남용을 방지한다.
### 무언가 잘못되더라도 지속적으로 올바르게 동작함

## 확장성
- 시스템이 특정 방식으로 커지면 이에 대처하기 위한 선택은 무엇인가?와 같은 질문을 고려한다는 의미

## 성능 기술
- 하둡과 같은 일괄 처리 시스템은 보통 처리량
- 온라인 시스템에서 더 중요한 사항은 서비스 응답 시간 즉 클라이언트가 요청을 보내고 응답을 받는 사이의 시간.

## 부하 대응 접근 방식
- 다수의 장비에 상태 비저장 서비스를 배포하는 일은 상당히 간단하다. 하지만 단일 노드에 상태 유지 데이터 시스템을 분산 설치하는 일은 아주 많은 복잡도가 추가적으로 발생한다. 이런 이유로 확장 비용이나 데이터베이스를 분산으로 만들어야 하는 고가용성 요구가 있을 때까지 단일 노드에 데이터베이스를 유지하는 것이 최근까지의 통념이었으나 분산 시스템을 위한 도구와 추상화가 좋아지면서 이 통념이 적어도 일부 애플리케이션에서는 바뀌었다.

- 스타트업 초기 단계나 검증되지 않은 제품의 경우에 미래를 가정한 부하에 대비해 확장하기 보다는 빠르게 반복해서 제품 기능을 개선하는 작업이 좀 더 중요하다.

## 유지보수성
### 시스템 설계원칙
- 운용성 : 운영팀이 시스템을 원할하게 운영할 수 있게 쉽게 만들자
- 단순성 : 시스템에서 복잡도를 최대한 새로운 엔지니어가 시스템을 이해하기 쉽게 만들자.
- 발전성 : 엔지니어가 이후에 시스템을 쉽게 변경할 수 있게 하라. 그래야 요구사항 변경 같은 예기치 않은 사용 사례를 적용하기가 쉽다. 이 속성은 유연성, 수정 가능성, 적응성으로 알려짐.



# 2장

## 관계형 모델과 문서 모델
- 관계형 모댈 : 데이터는 관계로 구성되고 각 관계는 순서 없는 튜플(row) 모음이다.
### NoSql 채택한 이유
- 대규모 데이터셋이나 매우 높은 쓰기 처리량 달성을 관계형 데이터베이스 보다 쉽게 할 수 있는 뛰어난 확장성의 필요
- 상용 데이터베이스 제품보다 무료 오픈소스 소프트웨어에 대한 선호도 확산
- 관계형 모델에서 지원하지 않는 특수 질의 동작
- 관계형 스키마의 제한에 대한 불만과 더욱 동적이고 표현력이 풍부한 데이터 모델에 대한 바람
### 문서형 모델의 장점
- 스키마 보다 더 나은 지역성을 갖는다. json표현에서는 모든 관련 정보가 한 곳에 있어 질의 하나로 충분.
### 문서형 모델의 단점
- 문서 데이터베이스에서는 일대다 트리 구조를 위해 조인이 필요하지 않지만 조인에 대한 지원이 보통 약함.(다대일 관계는 문서 모델에 적합하지 않다.)

-> 일반적으로 어떤 데이터 모델이 애플리케이션 코드를 더 간단하게 만드는지 말할 수 없다. 데이터 항목 간에 존재하는 관계 유형에 따라 다르다. 상호 연결이 많은 데이터의 경우 문서 모델은 곤란 하지만 관계형 모델은 무난하며 그래프 모델은 매우 자연스럽다.

## 데이터를 위한 질의 언어
- 선언형의 경우 알고자 하는 데이터의 패턴 즉 결과가 충족해야 하는 데이터를 어떻게 변환할지를 지정하기만 하면 된다. 어떤 색인과 어떤 조인 함수를 사용할지, 질의의 다양한 부분을 어떤 순서로 실행할지를 결정하는 일은 데이터베이스 시스템의 질의 최적화가 할 일.
- sql 예제는 특정 순서를 보장하지 않으므로 순서가 바뀌어도 상관없다. 하지만 질의가 명령형 코드로 작성됐다면 데이터베이스는 코드가 순서에 의존하는지 여부를 확신할 수 없다. sql이 기능적으로 더 제한적이라는 사실은 데이터베이스에게 자동으로 최적화할 수 있는 여지를 더 많이 준다는 의미다.
- 명령형 코드는 며ㅇ령어를 특정 순서로 수행하게끔 지정하기 때문에 다중 장비에서 병렬 처리가 매우 어렵다. 선언형 언어는 결과를 결정하기 위한 알고리즘을 지정하는 게 아니라 결과의 패턴만 지정하기 때문에 병렬 싱행으로 더 빨라질 가능성이 크다.

### 몽고 db
- 맵리듀스 형식을 따름 선언형도 아니고 명령형도 아닌 그 중간 어딘가..
- 선언형 질의도 가능

### 그래프형 데이터 모델
- 소셜 그래프 : 정점은 사람이고 간선은 사람들이 서로 알고 있음을 나타냄
- 웹그래프 : 정점은 웹페이지고 간선은 다른 페이지에 대한 html 링크를 나타냄
- 도로나 철도 네트워크: 정점은 교차로이고 간선은 교차로 간 도로나 촐로 선을 나타냄
### 장점
- 다른 여러 유형의 정점과 간선을 단일 그래프로 유지가 가능.
- 정점이 주어지면 정점의 유입과 유출 간선을 효율적으로 찾을 수 있고 그래프를 순회할 수 있다. 즉 일련의 정점을 따라 앞 뒤 방향으로 순회한다.
- 다른 유형의 관계에 서로 다른 레이블을 사용하면 단일 그래프에 다른 유형의 정보를 저장하면서도 데이터 모델을 깔끔하게 유지할 수 있다.
 